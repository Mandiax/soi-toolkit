#summary Installation Guide for Mule ESB.

= Installation Guide for Mule ESB =

This installation guide describes how to install both the free Community Edition (CE) of Mule ESB and the commercial Enterprise Edition (EE) of Mule ESB. 

*Note* that the file name differs slightly for the two editions. In general the file names for the Community Edition are used in the guide.

*Content*
<wiki:toc max_depth="4" />

== Installation instructions ==

===On Windows===

...To Be Described...

===On Linux (& Unix?)===

Download the distribution for the Community Edition with the command:

{{{
$ wget http://dist.codehaus.org/mule//distributions//mule-standalone-3.3.0.tar.gz
}}}

The distribution for the Enterprise Edition is downloaded from the MuleSoft customer portal and is named like 'mule-ee-distribution-standalone-3.3.0.tar.gz'

Unpack the distribution with the command:

{{{
$ sudo tar -xvf mule-standalone-3.3.0.tar.gz -C /usr/local
}}}

Create soft-link for the activemq daemon to your daemon init script directory
{{{
$ sudo ln -s /usr/local/mule-standalone-3.3.0/bin/mule /etc/init.d/mule_ce_3.3.0
}}}

Make Mule startup at boot-time:
{{{
$ sudo update-rc.d mule_ce_3.3.0 start 67 2 3 4 5 . stop 67 0 1 6 .
}}}

Startup Mule manually:
{{{
$ sudo service mule_ce_3.3.0 start
}}}

Lastly, ensure that Mule starts automatically after rebooting the OS and logging back in…
{{{
$ sudo reboot
$ tail /usr/local/mule-standalone-3.3.0/logs/mule.log -n50
}}}

You should have a message in the tail similar to the following:
{{{
**********************************************************************
* Mule ESB and Integration Platform                                  *
* Version: 3.3.0 Build: 24555                                        *
* MuleSoft, Inc.                                                     *
* For more information go to http://www.mulesoft.org                 *
*                                                                    *
* Server started: 2012-09-03 08:53                                   *
* JDK: 1.6.0_24 (mixed mode)                                         *
* OS: Linux (3.2.0-29-generic, amd64)                                *
* Host: magnus-MacBookPro (127.0.1.1)                                *
**********************************************************************
}}}

Verify that the startup time is accurate to ensure that you are reading the right log output!

Verify in `/var/log/boot.log` that you got the expected start order, e.g. that ActiveMQ starts before Mule!

====Some other useful commands====

To verify if Mule is running use the command:
{{{
$ sudo service mule_ce_3.3.0 status
}}}

To restart Mule use the command:
{{{
$ sudo service mule_ce_3.3.0 restart
}}}

To stop Mu ulese the command:
{{{
$ sudo service mule_ce_3.3.0 stop
}}}

To uninstall the Mule service, do the following:
{{{
$ sudo update-rc.d -f mule_ce_3.3.0 remove
$ sudo rm /etc/init.d/mule_ce_3.3.0
}}}

To run Mule in the console: ???
 * Go to the sub folder {{{apache-activemq-5.6.0/bin}}} and execute the command: {{{activemq console}}}.
  * *Note:* On Mac OS X go to the sub folder {{{apache-activemq-5.6.0/bin/macosx}}} and execute the command: {{{activemq console}}}.

==Configuration==

*TBS:*

 * Mule EE license file

 * Env vars in the wrapper script
/usr/local/mule-standalone-3.1.3/conf/wrapper.conf
Location of your application's data storage on disk.
wrapper.java.additional.4=-Dmule.app.data=/somefolder/mule.app.data

 * editera filen /usr/local/mule-standalone-3.1.3/bin/mule och skapa:
The upper limit on the number of files mule can open
ulimit -n 10240

 * non root user
Om Mule skall exekvera under en annan user än root:
1. editera filen /usr/local/mule-standalone-3.1.3/bin/mule och ändra på raden som anger
RUN_AS_USER t ex till:
RUN_AS_USER=mule
2. ändra /usr/local/mule-standalone-3.1.3 ägare till user som exekvera Mule (RUN_AS_USER):
$sudo chown -R mule:mule /usr/local/mule-standalone-3.1.3